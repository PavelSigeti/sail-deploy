import{u as A,r as b,_ as C,a as u,o as m,c as y,b as e,d as w,e as $,f as a,w as v,m as f,g as h,h as S,i as j,j as x,k as V,K as q,F as N,l as P}from"./app.7c300969.js";import{F as E,a as T,E as R,A as L,c as F,b as k,u as U,d as z}from"./AppLoader.cbbedb9a.js";import{C as B}from"./vue-select.68587b83.js";import{_ as K}from"./logo.a39c5c25.js";const W={name:"AppLoginForm",components:{Field:E,Form:T,ErrorMessage:R,AppLoader:L},emits:["close","switchReg","forget"],setup(){const t=A(),s=b(!1),l=F({email:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(3,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")});return{login:p=>{s.value=!0,t.dispatch("auth/login",p),s.value=!1},validationSchema:l,loading:s}}},I={class:"modal"},H={class:"modal-container"},O=e("h2",null,"\u0412\u0445\u043E\u0434",-1),D={class:"form-control"},G={class:"form-control"},J=e("button",{class:"btn btn-default btn-home"},"\u0412\u043E\u0439\u0442\u0438",-1),Q={class:"form-info jcc"},X={class:"form-info jcc"};function Y(t,s,l,o,p,_){const r=u("AppLoader"),c=u("Field"),d=u("ErrorMessage"),n=u("Form");return m(),y("div",I,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=i=>{t.$emit("close")})}),e("div",H,[o.loading?(m(),w(r,{key:0})):$("",!0),O,a(n,{onSubmit:o.login,class:"home-form","validation-schema":o.validationSchema},{default:v(()=>[e("div",D,[a(c,{name:"email"},{default:v(({field:i,errors:g})=>[e("input",f(i,{type:"email",class:["form-input",{invalid:!!g.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(d,{class:"alert",name:"email"})]),e("div",G,[a(c,{name:"password"},{default:v(({field:i,errors:g})=>[e("input",f(i,{type:"password",class:["form-input",{invalid:!!g.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),a(d,{class:"alert",name:"password"})]),J,e("div",Q,[h("\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?\xA0"),e("span",{class:"underline link",onClick:s[1]||(s[1]=i=>{t.$emit("switchReg")})},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")]),e("div",X,[h("\u0417\u0430\u0431\u044B\u043B \u043F\u0430\u0440\u043E\u043B\u044C?\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=i=>{t.$emit("forget")})},"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C")])]),_:1},8,["onSubmit","validation-schema"])])])}const Z=C(W,[["render",Y]]);function ee(){const t=b();return{universities:t,getUniversities:async()=>{try{const l=await S.get("/api/universities");t.value=l.data}catch(l){console.log(l.message)}}}}const se={name:"TheRegisterFormWizard",props:["validationSchema"],emits:["submitForm","switchReg"],components:{vSelect:B,Field:E,ErrorMessage:R},setup(t,{emit:s}){const l=A(),o=b(0),{universities:p,getUniversities:_}=ee();j(async()=>{_()});const r=x(()=>t.validationSchema[o.value]),{values:c,handleSubmit:d}=U({validationSchema:r,keepValuesOnUnmount:!0}),n=async g=>{try{return(await axios.post("/api/email",{email:g.email})).data}catch(M){console.log(M.message)}},i=d(async g=>{if(o.value===0)if(await n(g)===0){o.value++;return}else{l.dispatch("notification/displayMessage",{value:"Email \u0443\u0436\u0435 \u0437\u0430\u043D\u044F\u0442!",type:"error"});return}s("submitForm",g)});return{universities:p,submit:i,step:o}}},oe={class:"form-control"},ne={class:"form-control"},te={class:"form-control"},ie={class:"form-info mb15"},ae={class:"form-info jcc"},le={key:1,class:"reg-step"},re={class:"form-control"},ce={class:"form-control"},de={class:"form-control"},me={class:"form-control"},ue=e("div",{class:"form-info mb15"},"\u0415\u0441\u043B\u0438 \u0432\u0430\u0448\u0435\u0433\u043E \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430 \u043D\u0435\u0442, \u0442\u043E \u043F\u0440\u043E\u043F\u0443\u0441\u0442\u0435 \u044D\u0442\u043E \u043F\u043E\u043B\u0435",-1),pe={class:"form-info mb15"},ve=e("button",{class:"btn btn-default btn-home"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",-1),_e={class:"form-info jcc"};function ge(t,s,l,o,p,_){const r=u("Field"),c=u("ErrorMessage"),d=u("v-select");return m(),y("form",{onSubmit:s[6]||(s[6]=(...n)=>o.submit&&o.submit(...n)),class:"home-form",autocomplete:"off"},[o.step===0?(m(),y("div",{key:0,class:"reg-step",onKeyup:s[3]||(s[3]=V((...n)=>o.submit&&o.submit(...n),["enter"]))},[e("div",oe,[a(r,{name:"email"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"email",class:["form-input",{invalid:!!i.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(c,{class:"alert",name:"email"})]),e("div",ne,[a(r,{name:"password"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"password",class:["form-input",{invalid:!!i.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C"}),null,16)]),_:1}),a(c,{class:"alert",name:"password"})]),e("div",te,[a(r,{name:"password_confirmation"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"password",class:["form-input",{invalid:!!i.length}],placeholder:"\u041F\u0430\u0440\u043E\u043B\u044C \u0435\u0449\u0435 \u0440\u0430\u0437"}),null,16)]),_:1}),a(c,{class:"alert",name:"password_confirmation"})]),e("div",ie,[h("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \xA0 "),e("span",{class:"underline link",onClick:s[0]||(s[0]=()=>{})},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")]),e("div",{class:"btn btn-default btn-home",onClick:s[1]||(s[1]=(...n)=>o.submit&&o.submit(...n))},"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C (1 \u0438\u0437 2)"),e("div",ae,[h("\u0415\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430?\xA0"),e("span",{class:"underline link",onClick:s[2]||(s[2]=n=>t.$emit("switchReg"))},"\u0412\u043E\u0439\u0442\u0438")])],32)):$("",!0),o.step===1?(m(),y("div",le,[e("div",re,[a(r,{name:"surname"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"text",class:["form-input",{invalid:!!i.length}],placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"}),null,16)]),_:1}),a(c,{class:"alert",name:"surname"})]),e("div",ce,[a(r,{name:"name"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"text",class:["form-input",{invalid:!!i.length}],placeholder:"\u0418\u043C\u044F"}),null,16)]),_:1}),a(c,{class:"alert",name:"name"})]),e("div",de,[a(r,{name:"nickname"},{default:v(({field:n,errors:i})=>[e("input",f(n,{type:"text",class:["form-input",{invalid:!!i.length}],placeholder:"\u041D\u0438\u043A\u043D\u0435\u0439\u043C \u0432 \u0438\u0433\u0440\u0435"}),null,16)]),_:1}),a(c,{class:"alert",name:"nickname"})]),e("div",me,[a(r,{name:"university_id"},{default:v(({field:n})=>[a(d,f({options:o.universities,placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u043D\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"},n),null,16,["options"]),a(c,{class:"alert",name:"university_id"})]),_:1})]),ue,e("div",pe,[h("\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u044F \u0444\u043E\u0440\u043C\u0443, \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u043D\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 \xA0 "),e("span",{class:"underline link",onClick:s[4]||(s[4]=()=>{})},"\u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")]),ve,e("div",_e,[e("span",{class:"underline link",onClick:s[5]||(s[5]=n=>o.step=0)},"\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043D\u0430\u0437\u0430\u0434 (2 \u0438\u0437 2)")])])):$("",!0)],32)}const fe=C(se,[["render",ge]]),he={name:"AppRegisterForm",emits:["close","switchReg"],components:{TheRegisterFormWizard:fe,AppLoader:L},setup(t,{emit:s}){const l=b(0),o=A(),p=b(!1),_=[F({email:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail"),password:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").min(3,"\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0442 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),password_confirmation:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C").oneOf([z("password")],"\u041F\u0430\u0440\u043E\u043B\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0432\u043F\u043E\u0434\u0430\u0442\u044C")}),F({surname:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),name:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F").min(2,"\u041E\u0442 2-\u0445 \u0441\u0438\u043C\u0432\u043E\u0432\u043E\u043B\u043E\u0432"),nickname:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0438\u043A\u043D\u0435\u0439\u043C").min(2),university_id:F().nullable()})];return{register:async d=>{try{p.value=!0,await S.get("/sanctum/csrf-cookie"),d.university_id=d.university_id?d.university_id.code:null,await S.post("/register",d),o.dispatch("auth/login",{email:d.email,password:d.password})}catch(n){console.log(n.message),o.dispatch("notification/displayMessage",{value:"\u041E\u0448\u0438\u0431\u043A\u0430! \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",type:"error"}),p.value=!1}},step:l,loading:p,schema:_,switchToLogIn:()=>{s("switchReg")}}}},be={class:"modal"},ke={class:"modal-container"},$e=e("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1);function we(t,s,l,o,p,_){const r=u("AppLoader"),c=u("TheRegisterFormWizard");return m(),y("div",be,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=d=>{t.$emit("close")})}),e("div",ke,[o.loading?(m(),w(r,{key:0})):$("",!0),$e,a(c,{"validation-schema":o.schema,onSubmitForm:o.register,onSwitchReg:o.switchToLogIn},null,8,["validation-schema","onSubmitForm","onSwitchReg"])])])}const ye=C(he,[["render",we]]),Fe={name:"AppForgetPassword",components:{Field:E,Form:T,ErrorMessage:R,AppLoader:L},emits:["close","change"],setup(){A();const t=b(!1),s=F({email:k().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-mail").email("\u041D\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 E-mail")}),l=b(!1);return{validationSchema:s,loading:t,reset:async p=>{t.value=!0;try{await S.get("/sanctum/csrf-cookie"),await S.post("/forgot-password",{email:p.email}),l.value="\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443!"}catch(_){console.log(_.message)}t.value=!1,l.value=!0},msg:l}}},Se={class:"modal"},Ce={class:"modal-container"},Ae={key:1,class:"loading-overlay"},Ee=e("h2",null,"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",-1),Re={class:"form-control"},Le=e("button",{class:"btn btn-default btn-home"},"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",-1),Me={class:"form-info jcc"};function qe(t,s,l,o,p,_){const r=u("AppLoader"),c=u("Field"),d=u("ErrorMessage"),n=u("Form");return m(),y("div",Se,[e("div",{class:"modal-background",onClick:s[0]||(s[0]=i=>{t.$emit("close")})}),e("div",Ce,[o.loading?(m(),w(r,{key:0})):$("",!0),o.msg?(m(),y("div",Ae," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0441\u0432\u043E\u044E \u043F\u043E\u0447\u0442\u0443 ")):$("",!0),Ee,a(n,{onSubmit:o.reset,class:"home-form","validation-schema":o.validationSchema},{default:v(()=>[e("div",Re,[a(c,{name:"email"},{default:v(({field:i,errors:g})=>[e("input",f(i,{type:"email",class:["form-input",{invalid:!!g.length}],placeholder:"E-mail"}),null,16)]),_:1}),a(d,{class:"alert",name:"email"})]),Le,e("div",Me,[h("\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043E\u0431\u0440\u0430\u0442\u043D\u043E\xA0"),e("span",{class:"underline link",onClick:s[1]||(s[1]=i=>{t.$emit("change")})},"\u0412\u043E\u0439\u0442\u0438")])]),_:1},8,["onSubmit","validation-schema"])])])}const Te=C(Fe,[["render",qe]]),je={name:"Home",components:{AppLoginForm:Z,AppRegisterForm:ye,AppForgetPassword:Te},setup(){const t=b(!1),s=b(!1),l=b(!1);return{login:t,register:s,changeModal:()=>{t.value=!t.value,s.value=!s.value},forget:l,toggleForget:()=>{t.value=!t.value,l.value=!l.value}}}},xe={class:"container"},Ve={class:"row aic"},Ne=e("div",{class:"col-6"},[e("img",{src:K,alt:"vrisc logo",class:"logo"})],-1),Pe={class:"col-6 jcfe"},Ue={class:"container"},ze={class:"row"},Be={class:"col-12"},Ke={class:"home-container"},We={class:"home-main"},Ie=e("h1",null,[h("\u0414\u043E\u0431\u0440\u043E \u043F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C,"),e("br"),h(" \u043D\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0439"),e("br"),h(" \u041A\u0443\u0431\u043E\u043A \u0418\u0422\u041C\u041E"),e("br"),h(" \u043F\u043E \u043F\u0430\u0440\u0443\u0441\u043D\u043E\u043C\u0443 \u0441\u043F\u043E\u0440\u0442\u0443")],-1),He=P('<div class="home-links"><div class="home-link"><div class="home-link__hover"></div><span>\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0440\u0435\u0433\u0430\u0442</span></div><div class="home-link"><div class="home-link__hover"></div><span>\u0420\u0435\u0433\u043B\u0430\u043C\u0435\u043D\u0442</span></div><div class="home-link"><div class="home-link__hover"></div><span>\u041E \u043F\u0440\u043E\u0435\u043A\u0442\u0435</span></div><div class="home-link"><div class="home-link__hover"></div><span>\u0420\u0435\u0439\u0442\u0438\u043D\u0433 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432</span></div></div>',1);function Oe(t,s,l,o,p,_){const r=u("AppLoginForm"),c=u("AppForgetPassword"),d=u("AppRegisterForm");return m(),y(N,null,[e("header",null,[e("div",xe,[e("div",Ve,[Ne,e("div",Pe,[e("div",{class:"login-btn btn btn-border",onClick:s[0]||(s[0]=n=>o.login=!0)},"\u0412\u0445\u043E\u0434"),e("div",{class:"register-btn btn btn-default",onClick:s[1]||(s[1]=n=>o.register=!0)},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F")])])])]),e("main",null,[o.login?(m(),w(r,{key:0,onClose:s[2]||(s[2]=n=>o.login=!1),onSwitchReg:o.changeModal,onForget:s[3]||(s[3]=n=>o.toggleForget())},null,8,["onSwitchReg"])):$("",!0),(m(),w(q,null,[o.forget?(m(),w(c,{key:0,onClose:s[4]||(s[4]=n=>o.forget=!1),onChange:s[5]||(s[5]=n=>o.toggleForget())})):$("",!0)],1024)),(m(),w(q,null,[o.register?(m(),w(d,{key:0,onClose:s[6]||(s[6]=n=>o.register=!1),onSwitchReg:o.changeModal},null,8,["onSwitchReg"])):$("",!0)],1024)),e("div",Ue,[e("div",ze,[e("div",Be,[e("div",Ke,[e("div",We,[Ie,e("div",{class:"btn btn-default",onClick:s[7]||(s[7]=n=>o.register=!0)},"\u041F\u0440\u0438\u043D\u044F\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u0438\u0435")]),He])])])])])],64)}const Xe=C(je,[["render",Oe]]);export{Xe as default};
